{"is_source_file": true, "format": "Java", "description": "A Java service class that manages the lifecycle of taxi bookings, including creation, driver assignment, ride start and completion, cancellation, and retrieval functions within a taxi booking backend system.", "external_files": ["com.example.taxibookingbackend.domain.Booking", "com.example.taxibookingbackend.domain.User", "com.example.taxibookingbackend.domain.Driver", "com.example.taxibookingbackend.repository.BookingRepository", "com.example.taxibookingbackend.repository.UserRepository", "com.example.taxibookingbackend.repository.DriverRepository", "com.example.taxibookingbackend.exception.BadRequestException", "com.example.taxibookingbackend.exception.NotFoundException", "com.example.taxibookingbackend.dto.BookingDtos"], "external_methods": ["bookingRepository.save()", "bookingRepository.findById()", "bookingRepository.countByDriver_IdAndStatusIn()", "bookingRepository.findByUser_Id()", "bookingRepository.findByDriver_Id()", "userRepository.findById()", "driverRepository.findById()", "driverRepository.save()"], "published": ["createBooking", "assignDriver", "startRide", "completeRide", "cancelBooking", "getById", "listByUser", "listByDriver"], "classes": [{"name": "BookingService", "description": "Service class providing core business logic for managing booking lifecycle events, driver assignment, and querying bookings."}], "methods": [{"name": "createBooking", "description": "Creates a new booking with status REQUESTED for a given user."}, {"name": "assignDriver", "description": "Assigns an available driver to a booking with REQUESTED status and updates statuses accordingly."}, {"name": "startRide", "description": "Transitions a booking from ASSIGNED to IN_PROGRESS, indicating the ride has started."}, {"name": "completeRide", "description": "Marks an IN_PROGRESS booking as COMPLETED and makes the driver available again."}, {"name": "cancelBooking", "description": "Cancels a REQUESTED or ASSIGNED booking and releases the driver if assigned."}, {"name": "getById", "description": "Retrieves booking details by ID or throws NotFoundException."}, {"name": "listByUser", "description": "Lists all bookings associated with a specific user."}, {"name": "listByDriver", "description": "Lists all bookings associated with a specific driver."}], "calls": ["userRepository.findById()", "bookingRepository.save()", "bookingRepository.findById()", "driverRepository.findById()", "bookingRepository.countByDriver_IdAndStatusIn()", "driverRepository.save()"], "search-terms": ["BookingService", "assignDriver", "startRide", "completeRide", "cancelBooking", "BookingStatus", "DriverStatus", "taxi booking backend"], "state": 2, "file_id": 26, "knowledge_revision": 61, "git_revision": "6d937b55e3a43b793d151369192d942e6db5ecd2", "hash": "d9fb9d26a4d97e79a6a3bea1e614f558", "format-version": 4, "code-base-name": "taxi_booking_backend", "filename": "taxi_booking_backend/src/main/java/com/example/taxibookingbackend/service/BookingService.java", "revision_history": [{"61": "6d937b55e3a43b793d151369192d942e6db5ecd2"}]}